components:
  - name: ${HELM_DEPLOYER_COMPONENT_NAME}
    version: ${VERSION}
    provider:
      name: ${PROVIDER}
    sources:
      - name: main
        type: git
        version: ${VERSION}
        access:
          type: github
          commit: ${COMMIT_SHA}
          ref: refs/tags/${VERSION}
          repoUrl: ${COMPONENT_REPO}
    resources:
      - name: helm-deployer-blueprint
        type: landscaper.gardener.cloud/blueprint
        input:
          type: dir
          path: ./helm-deployer/blueprint
          compress: true
          mediaType: application/vnd.gardener.landscaper.blueprint.v1+tar+gzip
      - name: helm-deployer-chart
        type: helm.io/chart
        input:
          type: helm
          path: ${HELM_DEPLOYER_CHART_PATH}
          repository: charts/helm-deployer
      - name: helm-deployer-image
        type: ociImage
        input:
          type: ociArtifact
          path: ${HELM_DEPLOYER_CONTROLLER_IMAGE_REF}:${VERSION}
          repository: images/helm-deployer-controller

  - name: ${MANIFEST_DEPLOYER_COMPONENT_NAME}
    version: ${VERSION}
    provider:
      name: ${PROVIDER}
    sources:
      - name: main
        type: git
        version: ${VERSION}
        access:
          type: github
          commit: ${COMMIT_SHA}
          ref: refs/tags/${VERSION}
          repoUrl: ${COMPONENT_REPO}
    resources:
      - name: manifest-deployer-blueprint
        type: landscaper.gardener.cloud/blueprint
        input:
          type: dir
          path: ./manifest-deployer/blueprint
          compress: true
          mediaType: application/vnd.gardener.landscaper.blueprint.v1+tar+gzip
      - name: manifest-deployer-chart
        type: helm.io/chart
        input:
          type: helm
          path: ${MANIFEST_DEPLOYER_CHART_PATH}
          repository: charts/manifest-deployer
      - name: manifest-deployer-image
        type: ociImage
        input:
          type: ociArtifact
          path: ${MANIFEST_DEPLOYER_CONTROLLER_IMAGE_REF}:${VERSION}
          repository: images/manifest-deployer-controller

  - name: ${CONTAINER_DEPLOYER_COMPONENT_NAME}
    version: ${VERSION}
    provider:
      name: ${PROVIDER}
    sources:
      - name: main
        type: git
        version: ${VERSION}
        access:
          type: github
          commit: ${COMMIT_SHA}
          ref: refs/tags/${VERSION}
          repoUrl: ${COMPONENT_REPO}
    resources:
      - name: container-deployer-blueprint
        type: landscaper.gardener.cloud/blueprint
        input:
          type: dir
          path: ./container-deployer/blueprint
          compress: true
          mediaType: application/vnd.gardener.landscaper.blueprint.v1+tar+gzip
      - name: container-deployer-chart
        type: helm.io/chart
        input:
          type: helm
          path: ${CONTAINER_DEPLOYER_CHART_PATH}
          repository: charts/container-deployer
      - name: container-deployer-image
        type: ociImage
        input:
          type: ociArtifact
          path: ${CONTAINER_DEPLOYER_CONTROLLER_IMAGE_REF}:${VERSION}
          repository: images/container-deployer-controller
      - name: container-init-image
        type: ociImage
        input:
          type: ociArtifact
          path: ${CONTAINER_DEPLOYER_INIT_IMAGE_REF}:${VERSION}
          repository: images/container-deployer-init
      - name: container-wait-image
        type: ociImage
        input:
          type: ociArtifact
          path: ${CONTAINER_DEPLOYER_WAIT_IMAGE_REF}:${VERSION}
          repository: images/container-deployer-wait

  - name: ${MOCK_DEPLOYER_COMPONENT_NAME}
    version: ${VERSION}
    provider:
      name: ${PROVIDER}
    sources:
      - name: main
        type: git
        version: ${VERSION}
        access:
          type: github
          commit: ${COMMIT_SHA}
          ref: refs/tags/${VERSION}
          repoUrl: ${COMPONENT_REPO}
    resources:
      - name: mock-deployer-blueprint
        type: landscaper.gardener.cloud/blueprint
        input:
          type: dir
          path: ./mock-deployer/blueprint
          compress: true
          mediaType: application/vnd.gardener.landscaper.blueprint.v1+tar+gzip
      - name: mock-deployer-chart
        type: helm.io/chart
        input:
          type: helm
          path: ${MOCK_DEPLOYER_CHART_PATH}
          repository: charts/mock-deployer
      - name: mock-deployer-image
        type: ociImage
        input:
          type: ociArtifact
          path: ${MOCK_DEPLOYER_CONTROLLER_IMAGE_REF}:${VERSION}
          repository: images/mock-deployer-controller

  - name: ${LANDSCAPER_COMPONENT_NAME}
    version: ${VERSION}
    provider:
      name: ${PROVIDER}
    sources:
      - name: main
        type: git
        access:
          type: github
          commit: ${COMMIT_SHA}
          ref: refs/tags/${VERSION}
          repoUrl: ${COMPONENT_REPO}
    componentReferences:
      - name: helm-deployer
        componentName: ${HELM_DEPLOYER_COMPONENT_NAME}
        version: ${VERSION}
      - name: manifest-deployer
        componentName: ${MANIFEST_DEPLOYER_COMPONENT_NAME}
        version: ${VERSION}
      - name: container-deployer
        componentName: ${CONTAINER_DEPLOYER_COMPONENT_NAME}
        version: ${VERSION}
      - name: mock-deployer
        componentName: ${MOCK_DEPLOYER_COMPONENT_NAME}
        version: ${VERSION}
    resources:
      - name: landscaper-chart
        type: helm.io/chart
        input:
          type: helm
          path: ${LANDSCAPER_CHART_PATH}
          repository: charts/landscaper
      - name: landscaper-controller-rbac-chart
        type: helm.io/chart
        input:
          type: helm
          path: ${LANDSCAPER_CONTROLLER_RBAC_CHART_PATH}
          repository: charts/landscaper-controller-rbac
      - name: landscaper-controller-deployment-chart
        type: helm.io/chart
        input:
          type: helm
          path: ${LANDSCAPER_CONTROLLER_DEPLOYMENT_CHART_PATH}
          repository: charts/landscaper-controller-deployment
      - name: landscaper-agent-chart
        type: helm.io/chart
        input:
          type: helm
          path: ${LANDSCAPER_AGENT_CHART_PATH}
          repository: charts/landscaper-agent
      - name: landscaper-controller
        type: ociImage
        input:
          type: ociArtifact
          path: ${LANDSCAPER_CONTROLLER_IMAGE_REF}:${VERSION}
          repository: images/landscaper-controller
      - name: landscaper-webhooks-server
        type: ociImage
        input:
          type: ociArtifact
          path: ${LANDSCAPER_WEBHOOKS_SERVER_IMAGE_REF}:${VERSION}
          repository: images/landscaper-webhooks-server
      - name: landscaper-agent
        type: ociImage
        input:
          type: ociArtifact
          path: ${LANDSCAPER_AGENT_IMAGE_REF}:${VERSION}
          repository: images/landscaper-agent
