kind: TestDefinition
metadata:
  name: integration-test
spec:
  owner: gardener-oq@listserv.sap.com
  description: runs the intergration test suite of the landscaper
  activeDeadlineSeconds: 3650

  command: [bash, -c]
  args:
  - >-
    go test -timeout=60m -mod=vendor ./test/integration
    --v -ginkgo.v -ginkgo.progress -ginkgo.noColor -ginkgo.seed=17 -ginkgo.failFast
    --kubeconfig $TM_KUBECONFIG_PATH/$CLUSTER_NAME.config
    --registry-config=$TM_SHARED_PATH/docker.config
    --ls-namespace=ls-system
    --ls-version=$(./hack/get-version.sh)

  image: golang:1.19.2
